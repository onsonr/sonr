package state

import "github.com/labstack/echo/v4"

templ NavigatorCredentialsCreate(c echo.Context) {
	<script>
	function createCredential() {
		navigator.credentials.create({
			publicKey: {
				rp: {
					name: "Sonr",
				},
				user: {
					id: new Uint8Array(0),
					name: "Sonr",
					displayName: "Sonr",
				},
				challenge: new Uint8Array(0),
				pubKeyCredParams: [{
					type: "public-key",
					alg: -7,
				}],
				timeout: 60000,
				excludeCredentials: [],
				authenticatorSelection: {
					requireResidentKey: false,
					userVerification: "discouraged",
				},
			},
		})
			.then((assertion) => {
				console.log("Assertion:", assertion);
			})
			.catch((error) => {
				console.error("Error:", error);
			});
		}
	</script>
}

templ NavigatorCredentialsGet(c echo.Context) {
	<script>
		function getCredential() {
		navigator.credentials.get({
			publicKey: {
				challenge: new Uint8Array(0),
				allowCredentials: [],
				timeout: 60000,
				userVerification: "discouraged",
			},
		})
			.then((assertion) => {
				console.log("Assertion:", assertion);
			})
			.catch((error) => {
				console.error("Error:", error);
			});
	}
	</script>
}

templ NavigatorCredentialsGetAll(c echo.Context) {
	<script>
		navigator.credentials.getAll({
			publicKey: {
				challenge: new Uint8Array(0),
				allowCredentials: [],
				timeout: 60000,
				userVerification: "discouraged",
				extensions: {
					
				}
			},
		})
			.then((assertion) => {
				console.log("Assertion:", assertion);
			})
			.catch((error) => {
				console.error("Error:", error);
			});
	</script>
}

templ NavigatorCredentialsHasPasskey(c echo.Context) {
	<script>
		navigator.credentials.has()
			.then((has) => {
				console.log("Has Passkey:", has);
			})
			.catch((error) => {
				console.error("Error:", error);
			});
	</script>
}
