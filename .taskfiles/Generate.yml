version: "3"

tasks:
  pkl:gen:
    desc: Generate PKL files
    silent: true
    dir: "pkl/sonr.net"
    vars:
      FILES: ["Hway.pkl", "Motr.pkl", "UCAN.pkl"]
    cmds:
      - for: { var: FILES }
        cmd: gum spin --spinner dot --title "Generating PKL in Go..." -- pkl-gen-go {{.ITEM}}
  
  proto:gen:
    desc: Generate proto files
    silent: true
    cmd: gum spin --spinner dot --title "Generating Protobufs..." -- make proto-gen

  sqlc:gen:
    desc: Generate SQLC files
    silent: true
    cmds:
      - gum spin --spinner dot --title "Generating SQLC..." -- sqlc generate -f internal/database/sqlc.yaml

  templ:gen:
    desc: Generate templ files
    silent: true
    cmd: gum spin --spinner dot --title "Generating Templ..." -- templ generate
