version: "3"

vars:
  ROOT:
    sh: git rev-parse --show-toplevel
tasks:
  go-deps:
    desc: Install go dependencies
    dir: "{{.ROOT}}"
    silent: true
    vars:
      DEPS:
        - github.com/apple/pkl-go/cmd/pkl-gen-go@latest
        - github.com/sqlc-dev/sqlc/cmd/sqlc@latest
        - github.com/goreleaser/goreleaser/v2@latest
        - github.com/a-h/templ/cmd/templ@latest
    cmds: 
      for: { var: DEPS }
      cmd: go install {{.ITEM}}

