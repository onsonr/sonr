version: "3"

vars:
  ROOT:
    sh: git rev-parse --show-toplevel
tasks:
  start:
    desc: Start the services
    silent: true
    cmds: 
      - task: print
      - cmd: process-compose up 
        platforms:
          - darwin
      - cmd: process-compose up -d
        platforms:
          - linux

  stop:
    desc: Stop the services
    silent: true
    platforms:
      - darwin
    cmds: 
      - cmd: process-compose down
        platforms:
          - darwin
          - linux

  print:
    internal: true
    silent: true
    cmds:
      - gum format -- "# Sonr ({{.OS}}-{{.VERSION}})" "- ({{.COMMIT}})" "- {{.NOW}}" 
